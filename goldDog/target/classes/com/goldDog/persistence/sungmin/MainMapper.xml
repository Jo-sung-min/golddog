<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goldDog.persistence.sungmin.MainMapper">




	<!-- 
	// 맴버 ******************************************************
	// 맴버 정보 가져오기 페이징 처리 된 버젼 
	-->
		
	<!-- 맴버 여러명 가져오기 -->	
	<select id="getMember" resultType="com.goldDog.domain.MemberVO">
		select * from member 
		
		where m_no in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach> 
	</select>
	
	<!-- 맴버 한명만 가져오기 -->	
	<select id="getOneMember" resultType="com.goldDog.domain.MemberVO">
		select * from member where m_no=#{m_no} 
	</select>
	
	
	
	
	
	<!-- 
	// 훈련사 *******************************************************
	//훈련사 정보 하나 가져오기 -->
	<!-- 훈련사 한명의 정보 가져오기 -->
	<select id="getTrainer" resultType="com.goldDog.domain.TrainerVO">
		select * from trainer where t_no=#{t_no}
	</select>

	<!-- 모든 훈련사 가져오기 -->
	<select id="getAllTrainer" resultType="com.goldDog.domain.TrainerVO">
		select * from trainer 
	</select>
	
	<!-- 모든 훈련사 가져오기 t_no 순서대로 -->
	<select id="getAllTrainerT_no" resultType="com.goldDog.domain.TrainerVO">
		select * from trainer where t_no in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>  
	</select>
	
	<!-- 판매자 추가정보 등록하기 -->
	<update id="addTinfo">
		update trainer set 
		t_self=#{t_self}, t_sel=#{t_sel}, t_license=#{t_license}, t_price=#{t_price}, t_career=#{t_career}  
		where m_no = #{m_no}
	</update>
		
	
	<!-- 
	//미용사 *********************************************************-->
	
	<!-- 미용사 한명 가져오기 -->
	<select id="getHairstylist" resultType="com.goldDog.domain.HairstylistVO">
		select * from hairstylist where h_no=#{t_no}
	</select>	
	
	<!-- 모든 미용사 가져오기 -->
	<select id="getAllHairstylist" resultType="com.goldDog.domain.HairstylistVO">
		select * from hairstylist 
	</select>
	<!-- 모든 미용사 가져오기 t_no 순서대로 -->
	<select id="getAllHairstylistH_no" resultType="com.goldDog.domain.HairstylistVO">
		select * from hairstylist where h_no in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>  
	</select>
	
	
	
	
	
	
	
	
	
	
	<!-- 
	//리뷰 **********************************************************
	//훈련사한명의 리뷰 가져오기 -->
	<!-- 훈련사한명 한명의 리뷰 가져오기 -->
	<select id="getTReview" resultType="com.goldDog.domain.ReviewVO">
		select * from Review where t_no =#{t_no} 
	</select>
	
	<!-- 미용사 한명의 리뷰 가져오기 -->
	<select id="getHReview" resultType="com.goldDog.domain.ReviewVO">
		select * from Review where h_no =#{h_no} 
	</select>
	
	<!-- 훈련사 한명에 해당하는 모든 리뷰 가져오기 -->
	<select id="getAllReview" resultType="com.goldDog.domain.ReviewVO">
		select * from Review where t_no=#{t_no} 
	</select>

	<!-- 판매자 한명이 가지고 있는 리뷰 총갯수 세어주기 -->
	<select id="getReviewCount" resultType="int">
		 select count(*) from review where t_no=#{t_no}
	</select>
	





		
	<!-- 
	// 강아지 *******************************************************
	// 사용자 m_no 으로 사용자에게 등록된 강아지 한마리 가져오기 -->
	<!-- 사용자 한명에게 등록된 강아지 한마리 가져오기-->
	<select id="getMyDog" resultType="com.goldDog.domain.DogVO">
		 select * from dog where m_no=#{user_M_no}
	</select>
	
	<!-- d_no로강아지 한마리 가져오기-->
	<select id="getOneDog" resultType="com.goldDog.domain.DogVO">
		 select * from dog where d_no=#{d_no}
	</select>
	
	
	
	
	
	
	<!-- 
	//견적서 ********************************************************
	//회원이 협의하기 눌렀을때 견적서 만들어 주는 메서드 -->
	<!-- 견적서 넣어주는 메서드 -->
	<insert id="insertEst">
		insert into estimate(e_no, m_no_puppy, e_note, e_service, m_no_manager, e_con, p_no)
		 values(estimate_seq.nextval,#{m_no_puppy},#{e_note},#{e_service},#{m_no_manager},0,#{p_no})
	</insert>
		
	<!-- 사용자의 견적서 가져오는 메서드 -->
	<select id="getEstimate" resultType="com.goldDog.domain.EstimateVO">
		select * from estimate where M_no_puppy = #{m_no}
	</select>	
	
	<!-- m_no로 사용자의 주소 리스트 가져오기-->
	<select id="getMyAddress" resultType="com.goldDog.domain.AddressVO">
		 select * from address where m_no=#{m_no}
	</select>
	
	
	
	<!-- 
	//광고 ********************************************************-->
	<!-- 광고 4개중에 하나 업데이트 해주는 메서드-->
	<update id="addAD">
		update ad set
			ad_no = #{ad_no}, ad_img=#{ad_img} , ad_date=sysdate
			where ad_no =#{ad_no}
	</update>
	
	<!-- 광고 넘버하나받고 광고 정보 가져오는 메서드-->
	<select id="getAdName" resultType="com.goldDog.domain.ADVO">
		select * from ad where ad_no=#{a}
	</select>



	<!-- 
	//공지사항 ********************************************************-->
	<!-- 공지사항 추가-->
	<insert id="addNotice">
		insert into notice values 
		(notice_seq.nextval ,#{n_title} ,#{n_content},sysdate,0)
	</insert>
	<!-- 공지사항 모두 가져오기-->
	<select id="getAllNotice" resultType="com.goldDog.domain.NoticeVO">
		select * from notice
	</select>
	<!-- 공지사항 조회수 올려주기-->
	<update id="addViewPoint">
		update notice set n_readcount = n_readcount+1 where n_no=#{n_no} 
	</update>	



	













</mapper>